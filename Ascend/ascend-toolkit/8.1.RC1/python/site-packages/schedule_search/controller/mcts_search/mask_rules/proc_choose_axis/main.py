#!/usr/bin/env python3
# -*- coding: UTF-8 -*-
"""
Copyright (c) Huawei Technologies Co., Ltd. 2019-2020. All rights reserved.

rl schedule search, tss
"""
from schedule_search import log


def proc(progress, action_mask, rules):
    """
    主要输入是schedule对象、Mode、rules和inlined_stages
    主要输出是choose_axis轴长的规则
    """
    # 调用各个Rule
    for rule in rules:
        module = __import__(rule, fromlist=['1'])
        action_mask = module.proc(progress, action_mask)

    stage_index = progress.todo.stage_index
    log.dbg("stage [%s] %s choose axis action_mask: %s",
            progress.todo.stage_index,
            progress.op_schedule_info.schedule_obj.stages[stage_index],
            action_mask)
    return action_mask
