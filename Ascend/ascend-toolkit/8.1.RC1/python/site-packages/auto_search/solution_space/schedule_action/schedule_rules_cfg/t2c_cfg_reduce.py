#!/usr/bin/env python3
# -*- coding: UTF-8 -*-
"""
Copyright (c) Huawei Technologies Co., Ltd. 2019-2020. All rights reserved.
每条proc配置的demo:
    proc_order_id:{
        'proc_name': proc_name
        'support_patterns': support_patterns,
        'support_soc_versions': support_soc_versions,
        'rules':{
            rule_name_0: {
                'support_patterns': support_patterns,
                'support_soc_versions': support_soc_versions,
            },
            rule_name_1: {
                'support_patterns': support_patterns,
                'support_soc_versions': support_soc_versions,
            },
            rule_name_2: {
                'support_patterns': support_patterns,
                'support_soc_versions': support_soc_versions,
            },
        }
    }

"""
from auto_search.config.soc_cfg import ALL_SOC_VERSIONS

# 除了已经单独配置的cfg，其余pattern都包含在下面的配置中
T2C_CFG_REDUCE = {
    10: {
        'proc_name': 'proc_cache_rw',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'lv0_read_out2ub': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'lv0_write_ub2out': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    25: {
        'proc_name': 'proc_reuse',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_pattern_reuse': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    30: {
        'proc_name': 'proc_inline',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r02_cached_nonout_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    33: {
        'proc_name': 'proc_rfactor',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'reduce_r05_block_tiling_rfactor_for_atomic': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    35: {
        'proc_name': 'proc_rfactor',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'reduce_r02_ub_split_nlast_reduce_axis_for_normal': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    40: {
        'proc_name': 'proc_split',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
        }
    },
    45: {
        'proc_name': 'proc_rfactor',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'reduce_r01_ub_split_last_reduce_axis_for_normal': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    50: {
        'proc_name': 'proc_reorder',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'reduce_r01_reorder': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'reduce_r02_last_reduce_rfactor_reorder': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'reduce_atomic_r03_reorder': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    60: {
        'proc_name': 'proc_bind',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r02_reduce_atomic_bind_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r05_fused_bind_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    70: {
        'proc_name': 'proc_at',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'reduce_atomic_r03_at_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'reduce_r01_last_reduce_at_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'reduce_atomic_r02_last_reduce_at_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r99_refine_at_structure': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    82: {
        'proc_name': 'proc_double_buffer',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'generic_ub_db': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    90: {
        'proc_name': 'proc_emit_insn',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r06_reduce_atomic_insn_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r01_dma_copy_emit_insn': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r07_reduce_normal_last_reduce_insn_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r08_reduce_normal_nlast_reduce_insn_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r10_other_stage_axis': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    100: {
        'proc_name': 'proc_storage_align',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
        }
    },
    101: {
        'proc_name': 'proc_set_buffer_size',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
        }
    },
    102: {
        'proc_name': 'proc_infer_range',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
        }
    },
    103: {
        'proc_name': 'proc_pragma',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'reduce_r01_axis_group': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    110: {
        'proc_name': 'proc_build_config',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_cce_special': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },

}
