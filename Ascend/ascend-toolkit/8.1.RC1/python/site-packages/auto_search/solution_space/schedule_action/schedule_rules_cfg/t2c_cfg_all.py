#!/usr/bin/env python3
# -*- coding: UTF-8 -*-
"""
Copyright (c) Huawei Technologies Co., Ltd. 2019-2020. All rights reserved.
每条proc配置的demo:
    proc_order_id:{
        'proc_name': proc_name
        'support_soc_versions': support_soc_versions,
        'rules':{
            rule_name_0: {
                'support_soc_versions': support_soc_versions,
            },
            rule_name_1: {
                'support_soc_versions': support_soc_versions,
            },
            rule_name_2: {
                'support_soc_versions': support_soc_versions,
            },
        }
    }

"""
from auto_search.config.soc_cfg import ALL_SOC_VERSIONS

# 除了已经单独配置的cfg，其余pattern都包含在下面的配置中
T2C_CFG_ALL = {
    10: {
        'proc_name': 'proc_cache_rw',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'lv0_read_out2l1': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'lv0_read_out2ub': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'lv0_write_l0': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'lv0_write_l1': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'lv0_write_l12l0': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'lv0_write_ub2out': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'lv1_read_l12l0': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'lv1_write_l0c2ub': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'lv1_read_ub2l1': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    25: {
        'proc_name': 'proc_reuse',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_pattern_reuse': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_conv_l1fuse_reuse_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    30: {
        'proc_name': 'proc_inline',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_broadcast_to_tensor_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_cached_nonout_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r03_fused_gemm_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r04_split_with_elementwise_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r05_reshape_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r06_dma_between_vector_instr_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r07_remove_pad_in_no_padding_conv_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r08_requant_vector_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r09_trs_mid_tensor_should_inline': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    40: {
        'proc_name': 'proc_split',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_no_at_stage_no_split': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_no_exist_level_no_split': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r03_factor_smaller_than_axis': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r03_1_deep_fused_mad_split_same_input': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r03_2_conv_howo_axis_split_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r03_3_l1fuse_nk_no_split_in_l1': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r04_deeper_factor_smaller': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r05_c_axis_no_split': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r06_reduce_last_reduce_tail_not_1': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r07_no_at_reduce_stage_no_split': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r08_workspace_only_split_one_axis': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r09_axis_physical_constraint': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r10_split_none_reduce_axis': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r12_inter_out_tail_block_32b_align': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r13_bc_followed_32b': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r15_concat_only_split_concat_axis_after': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r16_gemm_batch_axis_no_split': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r17_similar_axis_same_factor': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r18_quant_stage_should_split_last_axis': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    50: {
        'proc_name': 'proc_reorder',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_diff_layers_reorder_separately': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            }
        }
    },
    60: {
        'proc_name': 'proc_bind',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_conv3d_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_reduce_atomic_bind_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r03_gemm_bind_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r04_gn_training_update_bind_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r05_fused_bind_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    70: {
        'proc_name': 'proc_at',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_reduce_atomic_at_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_gemm_at_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r03_gn_training_update_at_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r99_refine_at_structure': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    75: {
        'proc_name': 'proc_block_sync',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_tik_dsl_need_sync': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    80: {
        'proc_name': 'proc_allocate_at',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'matmul_l1_reuse': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    82: {
        'proc_name': 'proc_double_buffer',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'ub_db': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'l1_l0_db': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    85: {
        'proc_name': 'proc_preload',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_no_double_buffer_no_preload': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_rnn_check_if_need_preload': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r03_mad_fanin_fanout_no_preload': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r04_l0c_depends_need_preload': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r05_other_ub_preload': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    86: {
        'proc_name': 'proc_buffer_align',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_conv_set_fmatrix_need_align': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_dequant_after_conv_need_align': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    90: {
        'proc_name': 'proc_emit_insn',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_dma_axis': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r014_trs_dma_axis_add_attrs': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_mad_axis': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r03_set_fmatrix_axis': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r04_vector_axis_correct': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r05_reverse_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r06_reduce_atomic_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r07_reduce_nist_stage_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r08_phony_insn': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r09_vector_dichotomy_add_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r010_broadcast_enhance': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r011_reduce_for_scewl_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r012_vector_dichotomy_reduce_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r013_mad_add_bias_rule': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'rlast_other_stage_axis': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    100: {
        'proc_name': 'proc_storage_align',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_not_reduce_last': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_reduce_last': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    101: {
        'proc_name': 'proc_set_buffer_size',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_dynamic_broadcast': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    102: {
        'proc_name': 'proc_infer_range',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_elemwise_infer_range': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },
    110: {
        'proc_name': 'proc_build_config',
        'support_soc_versions': ALL_SOC_VERSIONS,
        'rules': {
            'r01_cce_special': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
            'r02_tbe_compile_para': {
                'support_soc_versions': ALL_SOC_VERSIONS,
            },
        }
    },

}
