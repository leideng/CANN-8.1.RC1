#!/usr/bin/env python3
# -*- coding: UTF-8 -*-
# Copyright (c) Huawei Technologies Co., Ltd. 2022-2022. All rights reserved.
"""
common apply action
"""
from auto_search.solution_space.action import apply_action_register
from auto_search.solution_space.action import PrepareActionType
from auto_search.compute_analysis import ComputePattern
from auto_search.compute_analysis.norm_compute_graph import NormComputeGraphInfo


@apply_action_register([ComputePattern.NORM], PrepareActionType.GRAPH_ANALYSIS)
def apply(progress):
    """
    norm graph analysis apply
    :param progress:
    :return:
    """
    op_schedule_info = progress.op_schedule_info
    op_schedule_info.update_dependency_dict()
    norm_compute_graph_info = NormComputeGraphInfo(op_schedule_info)
    op_schedule_info.compute_graph_info = norm_compute_graph_info
