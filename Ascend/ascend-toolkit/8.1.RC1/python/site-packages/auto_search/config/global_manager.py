#!/usr/bin/env python3
# -*- coding: UTF-8 -*-
# Copyright (c) Huawei Technologies Co., Ltd. 2022-2022. All rights reserved.
"""
rl schedule search, tss
"""
import multiprocessing


HISTORY_DICT = {}
HIT_HISTORY_DICT = {}
BEST_TUNE_INFO_DICT = {}
BEST_CHEQUE_DICT = {}


class MultiprocessManager:
    """
    multiprocessing manager
    """
    def __init__(self) -> None:
        self.multi_mgr = multiprocessing.Manager()

    @staticmethod
    def clear_shared_dict() -> None:
        """
        clear shared dict
        """
        global HISTORY_DICT
        global HIT_HISTORY_DICT
        global BEST_CHEQUE_DICT

        HISTORY_DICT.clear()
        HIT_HISTORY_DICT.clear()
        BEST_CHEQUE_DICT.clear()

    def init_shared_dict(self) -> None:
        """
        initialize shared dict
        """
        global HISTORY_DICT
        global HIT_HISTORY_DICT
        global BEST_CHEQUE_DICT

        HISTORY_DICT = self.multi_mgr.dict()
        HIT_HISTORY_DICT = self.multi_mgr.dict()
        BEST_CHEQUE_DICT = self.multi_mgr.dict()

    def shutdown(self) -> None:
        """
        close multiprocessing.Manager
        """
        global HISTORY_DICT
        global HIT_HISTORY_DICT
        global BEST_CHEQUE_DICT

        HISTORY_DICT = {}
        HIT_HISTORY_DICT = {}
        BEST_CHEQUE_DICT = {}

        self.multi_mgr.shutdown()
