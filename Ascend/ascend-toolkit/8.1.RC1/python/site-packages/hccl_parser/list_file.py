#!/usr/bin/env python
# coding=utf-8

# Copyright (c) Huawei Technologies Co., Ltd. 2017-2019. All rights reserved.
# description: 文件的一些遍历搜索操作
# Create: 2021-5-5

import os


def get_filelist_hccl(dirpath):
    datafile_list = []

    for path, dir_list, file_list in os.walk(dirpath):
        for file_name in file_list:

            if 'hcom' in file_name:
                file_path = os.path.join(path, file_name)
                datafile_list.append(file_path)
    return datafile_list


def get_dir_hwts(devid, dirpath, flag):
    for path, dir_list, file_list in os.walk(dirpath):
        for file_name in file_list:
            if (flag in file_name and 'done' not in file_name and 'complete' not in file_name
                and file_name.split('.')[-2] == '%s' % devid):
                file_path = os.path.join(path, file_name)
                ret_path = '%s' % (os.path.dirname(os.path.abspath(file_path)))
                return ret_path


def sel_devfile_from_filelist_hccl(devid, filelist):
    devfile_list = []
    for file_name in filelist:
        if file_name.split('_')[-2].split('.')[0] == '%s' % devid and file_name.split('.')[-1] != 'done':
            devfile_list.append(file_name)
    return devfile_list

