#!/usr/bin/env python
# -*- coding:utf-8 -*-
"""
Copyright (C) 2019. Huawei Technologies Co., Ltd. All rights reserved.
FILE:     tik_tensor_op.py
DESC:     provide params
CREATED:  2019-04-18 18:53:42
MODIFIED: 2020-12-7 19:17:00
"""
from tbe.tik.tik_lib.tik_expr import Expr
from tbe.tik.tik_lib.tik_check_util import TikCheckUtil
from tbe.tik.api.tik_scalar import Scalar


_MIN_DST_BLK_STRIDE = 1


class ScalarOp:
    """
    Scalar Ops
    """
    def __init__(self, scalar_obj, scalar_op_name):
        self.scalar_obj = scalar_obj
        self.scalar_op_name = scalar_op_name
        self.context = None

    def context_get_scalar(self, context):
        """
        get scalar value

        Returns
        -------
        scalar
        """
        return context.evaluate_expr(self.scalar_obj)

    def check_scalar_type(self):
        """
        scalar type check

        Returns
        -------
        None
        """
        TikCheckUtil.check_type_match(self.scalar_obj, (int, float, Expr, Scalar),
                                      "%s should be int, float, Expr or Scalar,"
                                      " input type is %s" % (self.scalar_op_name, type(self.scalar_obj)))
