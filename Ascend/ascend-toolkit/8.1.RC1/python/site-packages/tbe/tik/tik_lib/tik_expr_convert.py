#!/usr/bin/env python
# -*- coding:utf-8 -*-
"""
Copyright (C) 2019. Huawei Technologies Co., Ltd. All rights reserved.
FILE:     tik_expr_convert.py
DESC:     for tik expr to tvm node
CREATED:  2021-10-26 18:53:42
MODIFIED: 2021-10-26 19:17:00
"""
from tbe.tik.tik_lib.tik_expr import Expr


def type_convert_one(data, dtype=None):
    """
    from python var or tik var to tvm var node
    the performance depend the __hash__ performance of tik Expr
    Parameters
    ----------
    data: python var or tik var
    dtype: dst tvm var dtype

    Returns
    -------
    tvm var node
    """
    if dtype is not None:
        return Expr(data, dtype).get()
    return Expr(data).get()


def type_convert(data_list, dtype=None):
    """
    data type convert

    Parameters
    ----------
    data_list : data list
    dtype: convert data type

    Returns
    -------
    return : data type
    """
    # If you import at the top of the file, it causes a loop
    if isinstance(data_list, (list, tuple)):
        data_new = []
        for i in data_list:
            data_new.append(type_convert_one(i, dtype))
        return data_new
    return type_convert_one(data_list, dtype)
