#!/usr/bin/env python
# -*- coding:utf-8 -*-
"""
Copyright (C) 2021. Huawei Technologies Co., Ltd. All rights reserved.
FILE:     common_util_.py
DESC:     duplicate vector instructions for tik 1.5
CREATED:  2021-06-24 18:53:42
MODIFIED: 2021-06-24 19:17:00
"""

from functools import wraps
from tbe.tik.tik_lib.tik_params import TIK_VERSION_1_5


def set_tik_version_1_5():
    """
    bind this decorator with func that tik1.5 API
    Parameters
    ----------
    Returns
    -------
    function
    """
    def set_tik_version_decorator(func):
        @wraps(func)
        def wrapper(self, *args, **kwargs):
            """
            bind this decorator with func that need register source info
            """
            if self.ir_generator.tik_version < TIK_VERSION_1_5:
                self.ir_generator.tik_version = TIK_VERSION_1_5
            return func(self, *args, **kwargs)
        return wrapper
    return set_tik_version_decorator
