#!/usr/bin/env python
# -*- coding:utf-8 -*-
"""
Copyright (C) 2019. Huawei Technologies Co., Ltd. All rights reserved.
FILE:     tik_vnchwconv_b32_debug.py
DESC:     this file contains many data_transform debug
CREATED:  2021-12-15 10:50:08
MODIFIED: 2021-12-15 10:50:08
"""
from functools import wraps
from tbe.tik.debug.tikdbg.codemapping import get_caller_context
from tbe.tik.debug.tik_vector_ops_debug.tik_vnchwconv_b32_debug_ import VnchwconvB32


def vnchwconv_b32_decorator(func):
    """
    bind this decorator with vnchwconv of v100 b32

    Parameters
    ----------
    func : the decorated function

    Returns
    -------
    function
    """
    
    @wraps(func)
    def wrapper(op_obj, dst_tensor_list, dst_ub_fp16_high, dst_ub_fp16_lower):
        """
        bind this decorator with vnchwconv of v100 b32
        """
        if not op_obj.tik_instance.debug_disabled:
            stmt = VnchwconvB32(get_caller_context(), op_obj, dst_tensor_list,
                                (dst_ub_fp16_high, dst_ub_fp16_lower))
            op_obj.tik_instance.context.curr_scope().add_stmt(stmt)
        return func(op_obj, dst_tensor_list, dst_ub_fp16_high, dst_ub_fp16_lower)
    
    return wrapper
