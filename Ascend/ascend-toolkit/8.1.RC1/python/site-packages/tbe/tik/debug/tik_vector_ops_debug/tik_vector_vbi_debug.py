#!/usr/bin/env python
# -*- coding:utf-8 -*-
"""
Copyright (C) 2019. Huawei Technologies Co., Ltd. All rights reserved.
FILE:     new_decorators.py
DESC:     provide params
CREATED:  2019-04-18 18:53:42
MODIFIED: 2020-12-7 19:17:00
"""
from functools import wraps
from tbe.tik.debug import get_caller_context
from tbe.tik.debug.tik_vector_ops_debug.tik_vector_vbi_debug_ import VBIHighApi
from tbe.tik.debug.tik_vector_ops_debug.tik_vector_vbi_debug_ import VBI


def vbi_high_api_decorator(func):
    """
    bind this decorator with vbi instructions
    """
    @wraps(func)
    def wrapper(op_obj):
        if not op_obj.tik_instance.debug_disabled:
            stmt = VBIHighApi(get_caller_context(), op_obj)
            op_obj.tik_instance.context.curr_scope().add_stmt(stmt)
        return func(op_obj)
    return wrapper


def vbi_decorator(func):
    """
    bind this decorator with vbi instructions
    """
    @wraps(func)
    def wrapper(op_obj):
        if not op_obj.tik_instance.debug_disabled:
            stmt = VBI(get_caller_context(), op_obj)
            op_obj.tik_instance.context.curr_scope().add_stmt(stmt)
        return func(op_obj)
    return wrapper
