#!/usr/bin/env python
# -*- coding:utf-8 -*-
"""
Copyright (C) 2022. Huawei Technologies Co., Ltd. All rights reserved.

Define the v100 config
"""
from auto_tune.common_module.common_util import MAX_UINT16
from auto_tune.common_module.common_util import MAX_UINT32
from auto_tune.common_module.common_util import MKN
from auto_tune.common_module.common_util import CA0


# tiling output parameter type
TILING_STRUCTURE_TYPE_V100 = 0
HALF_INDEX_V100 = 25
CONFIG_KEYS_V100 = [
    "AL1_pbuffer", "A_overhead_opt_flag", "batch_dim",
    "m_dim", "group_dim",
    "AL1_shape_0", "AL1_shape_1", "AL1_shape_2", "AL1_shape_3",
     "AUB_pbuffer", "AUB_shape_0", "AUB_shape_1", "AUB_shape_2", "AUB_shape_3",
    "BL1_pbuffer", "B_overhead_opt_flag", "n_dim",
    "BL1_shape_0", "BL1_shape_1", "BL1_shape_2", "BL1_shape_3",
    "BUB_pbuffer", "BUB_shape_0", "BUB_shape_1", "BUB_shape_2", "BUB_shape_3",
    "AL0_pbuffer", "ma", "ka", "batcha", "groupa",
    "BL0_pbuffer", "kb", "nb", "batchb", "groupb",
    "CL0_pbuffer", "mc", "nc", "batchc", "groupc",
    "CUB_pbuffer", "n_factor", "m_factor", "batchub", "groupub", "CUB_channel_wise_flag",
    "UBG_pbuffer", "n_bef_batch_flag", "n_bef_group_flag", "batch_bef_group_flag"
]
TILING_SPACE_NONE_0_REPLACE_V100 = ["AUB_shape_0", "BUB_shape_0", "AL1_shape_0", "BL1_shape_0"]
FULL_LOAD_PAIRS_V100 = {
    "AUB_shape_0": MAX_UINT32, "AL1_shape_0": MAX_UINT32, "BL1_shape_0": MAX_UINT32, "kb": MAX_UINT16
}
BOOL_KEYS_V100 = [
    "n_bef_batch_flag", "n_bef_group_flag", "batch_bef_group_flag",
    "A_overhead_opt_flag", "B_overhead_opt_flag", "CUB_channel_wise_flag"
]
CROSS_POINTS_V100 = [
    "BL1_pbuffer", "AL0_pbuffer", "BL0_pbuffer", "CL0_pbuffer", "CUB_pbuffer", "UBG_pbuffer", "n_bef_batch_flag"
]
UNMUTABLE_POINTS_KEYS_V100 = ["UBG_pbuffer"]
TILING_DICT_STRUCTURE_V100 = {
    "AUB_shape": ["AUB_shape_0", "AUB_shape_1", "AUB_shape_2", "AUB_shape_3"],
    "BUB_shape": ["BUB_shape_0", "BUB_shape_1", "BUB_shape_2", "BUB_shape_3"],
    "AL1_shape": ["AL1_shape_0", "AL1_shape_1", "AL1_shape_2", "AL1_shape_3"],
    "BL1_shape": ["BL1_shape_0", "BL1_shape_1", "BL1_shape_2", "BL1_shape_3"],
    "AL0_matrix": ["ma", "ka", MKN, CA0, "batcha", "groupa"],
    "BL0_matrix": ["kb", "nb", MKN, CA0, "batchb", "groupb"],
    "CL0_matrix": ["nc", "mc", MKN, MKN, "batchc", "groupc"],
    "CUB_matrix": ["n_factor", "m_factor", MKN, MKN, "batchub", "groupub"],
    "block_dim": ["batch_dim", "n_dim", "m_dim", "group_dim"],
    "n_bef_batch_flag": "n_bef_batch_flag",
    "n_bef_group_flag": "n_bef_group_flag",
    "batch_bef_group_flag": "batch_bef_group_flag",
    "A_overhead_opt_flag": "A_overhead_opt_flag",
    "B_overhead_opt_flag": "B_overhead_opt_flag",
    "CUB_channel_wise_flag": "CUB_channel_wise_flag",
    "manual_pingpong_buffer": {
        "AUB_pbuffer": "AUB_pbuffer",
        "BUB_pbuffer": "BUB_pbuffer",
        "AL1_pbuffer": "AL1_pbuffer",
        "BL1_pbuffer": "BL1_pbuffer",
        "AL0_pbuffer": "AL0_pbuffer",
        "BL0_pbuffer": "BL0_pbuffer",
        "CL0_pbuffer": "CL0_pbuffer",
        "CUB_pbuffer": "CUB_pbuffer",
        "UBG_pbuffer": "UBG_pbuffer"
    }
}

# TILING_STRUCTURE CONFIG
TILING_STRUCTURE_V100 = {
    "tiling_structure_type": TILING_STRUCTURE_TYPE_V100,
    "config_keys": CONFIG_KEYS_V100,
    "full_load_pairs": FULL_LOAD_PAIRS_V100,
    "bool_keys": BOOL_KEYS_V100,
    "cross_point_keys": CROSS_POINTS_V100,
    "none_0_replace": TILING_SPACE_NONE_0_REPLACE_V100,
    "unmutable_point_keys": UNMUTABLE_POINTS_KEYS_V100,
    "tiling_dict_structure": TILING_DICT_STRUCTURE_V100,
    "half_index": HALF_INDEX_V100
}